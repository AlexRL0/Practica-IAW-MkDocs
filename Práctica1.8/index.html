
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../Pr%C3%A1ctica1.1/">
      
      
        <link rel="next" href="../Pr%C3%A1ctica1.11/">
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.7">
    
    
      
        <title>Práctica-1.8 - IAW</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.8608ea7d.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="cyan" data-md-color-accent="purple">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#practica-iaw-18-implantacion-de-moodle-en-amazon-web-services-aws" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="IAW" class="md-header__button md-logo" aria-label="IAW" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            IAW
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Práctica-1.8
            
          </span>
        </div>
      </div>
    </div>
    
      
    
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="IAW" class="md-nav__button md-logo" aria-label="IAW" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    IAW
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Principal
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../about/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Acerca de
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../Pr%C3%A1ctica1.1/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Práctica-1.1
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Práctica-1.8
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Práctica-1.8
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#pasos-previos-a-la-instalacion" class="md-nav__link">
    <span class="md-ellipsis">
      Pasos previos a la instalación
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#implantacion-de-moodle-en-amazon-web-services-aws" class="md-nav__link">
    <span class="md-ellipsis">
      Implantación de Moodle en Amazon Web Services (AWS)
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#1-creamos-un-nombre-de-dominio-para-nuestro-servidor-con-la-web-no-ip" class="md-nav__link">
    <span class="md-ellipsis">
      1. Creamos un nombre de dominio para nuestro servidor con la web no-ip
    </span>
  </a>
  
    <nav class="md-nav" aria-label="1. Creamos un nombre de dominio para nuestro servidor con la web no-ip">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#paso-1-crear-el-nombre-del-dominio" class="md-nav__link">
    <span class="md-ellipsis">
      Paso 1. Crear el nombre del dominio
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2-creacion-del-archivo-deploy_moodle-para-la-implementacion" class="md-nav__link">
    <span class="md-ellipsis">
      2. Creación del archivo deploy_moodle para la implementación
    </span>
  </a>
  
    <nav class="md-nav" aria-label="2. Creación del archivo deploy_moodle para la implementación">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#paso-1-importamos-el-archivo-de-variables-y-mostramos-los-comandos-que-se-van-ejecutando" class="md-nav__link">
    <span class="md-ellipsis">
      Paso 1. Importamos el archivo de variables y mostramos los comandos que se van ejecutando
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#paso-2-eliminamos-descargas-previas-de-moodle" class="md-nav__link">
    <span class="md-ellipsis">
      Paso 2. Eliminamos descargas previas de moodle
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#paso-3-eliminamos-descargas-previas-de-varwwwhtml" class="md-nav__link">
    <span class="md-ellipsis">
      Paso 3. Eliminamos descargas previas de /var/www/html/*
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#paso-4-descargamos-el-codigo-fuente-de-moodle" class="md-nav__link">
    <span class="md-ellipsis">
      Paso 4. Descargamos el código fuente de Moodle
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#paso-5-extraemos-moodle" class="md-nav__link">
    <span class="md-ellipsis">
      Paso 5. Extraemos Moodle
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#paso-6-movemos-moodle-al-directorio-deseado" class="md-nav__link">
    <span class="md-ellipsis">
      Paso 6. Movemos Moodle al directorio deseado
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#paso-7-configuramos-permisos-para-apache" class="md-nav__link">
    <span class="md-ellipsis">
      Paso 7. Configuramos permisos para apache
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#paso-8-creamos-la-base-de-datos-y-el-usuario-para-moodle" class="md-nav__link">
    <span class="md-ellipsis">
      Paso 8. Creamos la base de datos y el usuario para Moodle
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#paso-9-creamos-el-archivo-de-configuracion-de-moodle-y-lo-configuramos" class="md-nav__link">
    <span class="md-ellipsis">
      Paso 9. Creamos el archivo de configuración de moodle y lo configuramos
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#paso-10-creamos-el-directorio-de-datos-de-moodle" class="md-nav__link">
    <span class="md-ellipsis">
      Paso 10. Creamos el directorio de datos de Moodle
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#paso-11-reiniciamos-apache" class="md-nav__link">
    <span class="md-ellipsis">
      Paso 11. Reiniciamos apache
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#paso-12-comprobacion-de-que-moodle-funciona" class="md-nav__link">
    <span class="md-ellipsis">
      Paso 12. Comprobación de que Moodle funciona
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../Pr%C3%A1ctica1.11/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Práctica-1.11
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../Pr%C3%A1ctica5.4/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Práctica-5.4
    
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#pasos-previos-a-la-instalacion" class="md-nav__link">
    <span class="md-ellipsis">
      Pasos previos a la instalación
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#implantacion-de-moodle-en-amazon-web-services-aws" class="md-nav__link">
    <span class="md-ellipsis">
      Implantación de Moodle en Amazon Web Services (AWS)
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#1-creamos-un-nombre-de-dominio-para-nuestro-servidor-con-la-web-no-ip" class="md-nav__link">
    <span class="md-ellipsis">
      1. Creamos un nombre de dominio para nuestro servidor con la web no-ip
    </span>
  </a>
  
    <nav class="md-nav" aria-label="1. Creamos un nombre de dominio para nuestro servidor con la web no-ip">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#paso-1-crear-el-nombre-del-dominio" class="md-nav__link">
    <span class="md-ellipsis">
      Paso 1. Crear el nombre del dominio
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2-creacion-del-archivo-deploy_moodle-para-la-implementacion" class="md-nav__link">
    <span class="md-ellipsis">
      2. Creación del archivo deploy_moodle para la implementación
    </span>
  </a>
  
    <nav class="md-nav" aria-label="2. Creación del archivo deploy_moodle para la implementación">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#paso-1-importamos-el-archivo-de-variables-y-mostramos-los-comandos-que-se-van-ejecutando" class="md-nav__link">
    <span class="md-ellipsis">
      Paso 1. Importamos el archivo de variables y mostramos los comandos que se van ejecutando
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#paso-2-eliminamos-descargas-previas-de-moodle" class="md-nav__link">
    <span class="md-ellipsis">
      Paso 2. Eliminamos descargas previas de moodle
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#paso-3-eliminamos-descargas-previas-de-varwwwhtml" class="md-nav__link">
    <span class="md-ellipsis">
      Paso 3. Eliminamos descargas previas de /var/www/html/*
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#paso-4-descargamos-el-codigo-fuente-de-moodle" class="md-nav__link">
    <span class="md-ellipsis">
      Paso 4. Descargamos el código fuente de Moodle
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#paso-5-extraemos-moodle" class="md-nav__link">
    <span class="md-ellipsis">
      Paso 5. Extraemos Moodle
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#paso-6-movemos-moodle-al-directorio-deseado" class="md-nav__link">
    <span class="md-ellipsis">
      Paso 6. Movemos Moodle al directorio deseado
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#paso-7-configuramos-permisos-para-apache" class="md-nav__link">
    <span class="md-ellipsis">
      Paso 7. Configuramos permisos para apache
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#paso-8-creamos-la-base-de-datos-y-el-usuario-para-moodle" class="md-nav__link">
    <span class="md-ellipsis">
      Paso 8. Creamos la base de datos y el usuario para Moodle
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#paso-9-creamos-el-archivo-de-configuracion-de-moodle-y-lo-configuramos" class="md-nav__link">
    <span class="md-ellipsis">
      Paso 9. Creamos el archivo de configuración de moodle y lo configuramos
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#paso-10-creamos-el-directorio-de-datos-de-moodle" class="md-nav__link">
    <span class="md-ellipsis">
      Paso 10. Creamos el directorio de datos de Moodle
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#paso-11-reiniciamos-apache" class="md-nav__link">
    <span class="md-ellipsis">
      Paso 11. Reiniciamos apache
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#paso-12-comprobacion-de-que-moodle-funciona" class="md-nav__link">
    <span class="md-ellipsis">
      Paso 12. Comprobación de que Moodle funciona
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  



<h1 id="practica-iaw-18-implantacion-de-moodle-en-amazon-web-services-aws">Practica-IAW-1.8- Implantación de Moodle en Amazon Web Services (AWS)</h1>
<h2 id="pasos-previos-a-la-instalacion">Pasos previos a la instalación</h2>
<p><strong>para la instalación vamos a tener que crear la siguiente estructura de directorios y archivos:</strong></p>
<p><img alt="" src="../imagenes/directorio-1.8.png" /></p>
<p><strong>Una vez creados los archivos y directorios, procedemos a la instalación de las herramientas.</strong></p>
<h2 id="implantacion-de-moodle-en-amazon-web-services-aws">Implantación de Moodle en Amazon Web Services (AWS)</h2>
<h2 id="1-creamos-un-nombre-de-dominio-para-nuestro-servidor-con-la-web-no-ip">1. Creamos un nombre de dominio para nuestro servidor con la web <code>no-ip</code></h2>
<h3 id="paso-1-crear-el-nombre-del-dominio">Paso 1. Crear el nombre del dominio</h3>
<p>Para crear el nombre de dominio en la página, tenemos que registrarnos y dirigirnos al sitio que muestra la captura y darle a <strong>crear nombre de host</strong>.</p>
<p><img alt="" src="../imagenes/no-ip1.8.png" /></p>
<p>Una vez dado al recuadro de crear el nombre, nos sale un asistente para poner el nombre de host que queramos, el dominio que queremos que lleve, la dirección ip de la máquina o pc que queremos que tenga ese nombre de host y el tipo de registro que queremos que lleve, en nuestro caso es el <strong>DNS Host A</strong></p>
<p><img alt="" src="../imagenes/no-ip2-1.8.png" /></p>
<p>Hecho esto ya podemos automatizar la implantación de Moodle en Amazon Web Services (AWS)</p>
<h2 id="2-creacion-del-archivo-deploy_moodle-para-la-implementacion">2. Creación del archivo <code>deploy_moodle</code> para la implementación</h2>
<h3 id="paso-1-importamos-el-archivo-de-variables-y-mostramos-los-comandos-que-se-van-ejecutando">Paso 1. Importamos el archivo de variables y mostramos los comandos que se van ejecutando</h3>
<pre><code class="language-bash">source .env
</code></pre>
<pre><code class="language-bash">set -ex
</code></pre>
<h3 id="paso-2-eliminamos-descargas-previas-de-moodle">Paso 2. Eliminamos descargas previas de moodle</h3>
<pre><code class="language-bash">rm -rf /tmp/moodle*
</code></pre>
<blockquote>
<p>[!TIP]<br />
Hacemos esto para evitar que haya duplicados dentro de ese directorio a la hora de descargarnos moodle.</p>
</blockquote>
<h3 id="paso-3-eliminamos-descargas-previas-de-varwwwhtml">Paso 3. Eliminamos descargas previas de /var/www/html/*</h3>
<pre><code class="language-bash">rm -rf /var/www/html/*
</code></pre>
<h3 id="paso-4-descargamos-el-codigo-fuente-de-moodle">Paso 4. Descargamos el código fuente de Moodle</h3>
<pre><code class="language-bash">wget https://download.moodle.org/download.php/direct/stable405/moodle-latest-405.tgz -P /tmp
</code></pre>
<h3 id="paso-5-extraemos-moodle">Paso 5. Extraemos Moodle</h3>
<pre><code class="language-bash">tar -zxvf /tmp/moodle-latest-405.tgz -C /tmp
</code></pre>
<h3 id="paso-6-movemos-moodle-al-directorio-deseado">Paso 6. Movemos Moodle al directorio deseado</h3>
<pre><code class="language-bash">mv /tmp/moodle $MOODLE_DIRECTORY
</code></pre>
<h3 id="paso-7-configuramos-permisos-para-apache">Paso 7. Configuramos permisos para apache</h3>
<pre><code class="language-bash">chown -R www-data:www-data $MOODLE_DIRECTORY
chmod -R 755 $MOODLE_DIRECTORY
</code></pre>
<h3 id="paso-8-creamos-la-base-de-datos-y-el-usuario-para-moodle">Paso 8. Creamos la base de datos y el usuario para Moodle</h3>
<pre><code class="language-bash">mysql -u root &lt;&lt;&lt; &quot;DROP DATABASE IF EXISTS $MOODLE_DB_NAME&quot;
mysql -u root &lt;&lt;&lt; &quot;CREATE DATABASE $MOODLE_DB_NAME DEFAULT CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci&quot;
mysql -u root &lt;&lt;&lt; &quot;DROP USER IF EXISTS '$MOODLE_DB_USER'@'$IP_CLIENTE_MYSQL'&quot;
mysql -u root &lt;&lt;&lt; &quot;CREATE USER '$MOODLE_DB_USER'@'$IP_CLIENTE_MYSQL' IDENTIFIED BY '$MOODLE_DB_PASSWORD'&quot;
mysql -u root &lt;&lt;&lt; &quot;GRANT ALL PRIVILEGES ON $MOODLE_DB_NAME.* TO '$MOODLE_DB_USER'@'$IP_CLIENTE_MYSQL'&quot;
mysql -u root &lt;&lt;&lt; &quot;FLUSH PRIVILEGES&quot;
</code></pre>
<blockquote>
<p>[!IMPORTANT]<br />
Las variables las cambiamos por las que tenemos en el archivo <code>.env</code> configuradas para que se cree todo correctamente.</p>
</blockquote>
<h3 id="paso-9-creamos-el-archivo-de-configuracion-de-moodle-y-lo-configuramos">Paso 9. Creamos el archivo de configuración de moodle y lo configuramos</h3>
<pre><code class="language-bash">cp $MOODLE_DIRECTORY/config-dist.php $MOODLE_DIRECTORY/config.php
sed -i &quot;s/'pgsql'/'${MOODLE_TYPE//\//\\/}'/g&quot; $MOODLE_DIRECTORY/config.php 
sed -i &quot;s/'localhost'/'${MOODLE_DB_HOST//\//\\/}'/g&quot; $MOODLE_DIRECTORY/config.php 
sed -i &quot;s/'moodle'/'${MOODLE_DB_NAME//\//\\/}'/g&quot; $MOODLE_DIRECTORY/config.php 
sed -i &quot;s/'username'/'${MOODLE_DB_USER//\//\\/}'/g&quot; $MOODLE_DIRECTORY/config.php 
sed -i &quot;s/'password'/'${MOODLE_DB_PASSWORD//\//\\/}'/g&quot; $MOODLE_DIRECTORY/config.php 
sed -i &quot;s|\$CFG-&gt;wwwroot.*|\$CFG-&gt;wwwroot = 'https://${MOODLE_DOMAIN//\//\\/}';|&quot; $MOODLE_DIRECTORY/config.php
sed -i &quot;s|\$CFG-&gt;dataroot.*|\$CFG-&gt;dataroot = '${MOODLE_DATA_DIRECTORY//\//\\/}';|&quot; $MOODLE_DIRECTORY/config.php
sed -i &quot;s/^max_input_vars.*/max_input_vars = 5000/&quot; /etc/php/8.3/cli/php.ini
sed -i &quot;s/^max_input_vars.*/max_input_vars = 5000/&quot; /etc/php/8.3/apache2/php.ini
</code></pre>
<blockquote>
<p>[!IMPORTANT]<br />
<strong>Las variables</strong> las cambiamos por las que tenemos en el archivo <code>.env</code> configuradas para que se cree todo correctamente. </p>
<blockquote>
<p><strong>Descripción de los comandos:</strong> 
- Cambia el tipo de base de datos usado por Moodle. 
- Actualiza la dirección del servidor de la base de datos. 
- Configura el nombre de la base de datos de Moodle. 
- Establece el nombre de usuario para la base de datos. 
- Define la contraseña para la base de datos. 
- Actualiza la URL principal del sitio Moodle. 
- Configura el directorio donde Moodle almacena sus datos. 
- Ajusta el parámetro <code>max_input_vars</code> para PHP CLI. 
- Ajusta el parámetro <code>max_input_vars</code> para PHP Apache.</p>
</blockquote>
</blockquote>
<h3 id="paso-10-creamos-el-directorio-de-datos-de-moodle">Paso 10. Creamos el directorio de datos de Moodle</h3>
<pre><code class="language-bash">mkdir -p $MOODLE_DATA_DIRECTORY
chown -R www-data:www-data $MOODLE_DATA_DIRECTORY
chmod -R 755 $MOODLE_DATA_DIRECTORY
</code></pre>
<h3 id="paso-11-reiniciamos-apache">Paso 11. Reiniciamos apache</h3>
<pre><code class="language-bash">systemctl restart apache2
</code></pre>
<h3 id="paso-12-comprobacion-de-que-moodle-funciona">Paso 12. Comprobación de que Moodle funciona</h3>
<p><img alt="" src="../imagenes/Moodle.png" /></p>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "..", "features": [], "search": "../assets/javascripts/workers/search.f8cc74c7.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../assets/javascripts/bundle.c8b220af.min.js"></script>
      
    
  </body>
</html>